# Kernel config based on: arch/arm/configs/tegra_android_defconfig

pkgname="linux-samsung-p4wifi"
pkgver=4.14.0
pkgrel=1
pkgdesc="Galaxy Tab 10.1 kernel"
arch="armhf"
_carch="arm"
_flavor="samsung-p4wifi"
url="https://kernel.org"
license="GPL2"
options="!strip !check !tracedeps"
makedepends="perl sed installkernel bash gmp-dev bc linux-headers elfutils-dev xz"
HOSTCC="${CC:-gcc}"
HOSTCC="${HOSTCC#${CROSS_COMPILE}}"

# Source
_repository="linux"
_rev="742ba99a0bde5734d5ba9ef0361e3747773c05f3"
_config="config-${_flavor}.${arch}"
source="
	$_config
	zImage-dtb
	kernel.release
"
builddir="$srcdir/${_repository}-${_rev}"

menuconfig() {
	cd "$builddir"
	make ARCH="$_carch" menuconfig
	cp .config "$startdir"/$_config
}

package() {
#
# prebuilt
#
	install -Dm644 "$srcdir/zImage-dtb" \
		"$pkgdir/boot/vmlinuz-$_flavor"
	install -D "$srcdir/kernel.release" \
		"$pkgdir/usr/share/kernel/$_flavor/kernel.release"
}

sha512sums="d51735e90f6ddd5617541dd5f00807637dafe7c3f8768531a01ad18e78b0b19bc7abb55348ab95053419d09b565dd35089fc6bba53997b9e08a323416efa5185  config-samsung-p4wifi.armhf
0c8a76333ecfceaffa9ac0686fd1dcd5958b2af11d55222b28cc2d7eda947c96f5ca8f15d2bee8f69a9968ff4ea35cd1406fa5c1417a5ebc1a069c6983471cdf  zImage-dtb
eee850459647d134fc06ac73412204311e28d86641b8740dfd9a7bf7167f27a909c41e1f265c98fbc14ff45de150dc54f428a98f9af439c608b688a14b169a44  kernel.release"
