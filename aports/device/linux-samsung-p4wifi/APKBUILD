# Kernel config based on: arch/arm/configs/tegra_android_defconfig

pkgname="linux-samsung-p4wifi"
pkgver=4.14.0
pkgrel=1
pkgdesc="Galaxy Tab 10.1 kernel"
arch="armhf"
_carch="arm"
_flavor="samsung-p4wifi"
url="https://kernel.org"
license="GPL2"
options="!strip !check !tracedeps"
makedepends="perl sed installkernel bash gmp-dev bc linux-headers elfutils-dev xz"
HOSTCC="${CC:-gcc}"
HOSTCC="${HOSTCC#${CROSS_COMPILE}}"

# Source
_repository="linux"
_rev="742ba99a0bde5734d5ba9ef0361e3747773c05f3"
_config="config-${_flavor}.${arch}"
source="
	$_config
	zImage-dtb
	kernel.release
"
builddir="$srcdir/${_repository}-${_rev}"

menuconfig() {
	cd "$builddir"
	make ARCH="$_carch" menuconfig
	cp .config "$startdir"/$_config
}

package() {
#
# prebuilt
#
	install -Dm644 "$srcdir/zImage-dtb" \
		"$pkgdir/boot/vmlinuz-$_flavor"
	install -D "$srcdir/kernel.release" \
		"$pkgdir/usr/share/kernel/$_flavor/kernel.release"
}

sha512sums="03a61b17390f2d7a7a5408e970ef59290cb44aedc5224225a363fc2a3869f0e8720e44e38743342bc339adb7dd08804705a463779da76a710bea5e69b246f47e  config-samsung-p4wifi.armhf
28d799af20e6449790a897b6a8bf4acc0f42c96fd11f0abbbe5b3b3862432a02160081ebf9e4f9cf43b207d7a772a78a0c204498da08e0e8b51c11004ca5299e  zImage-dtb
5222448ff707d1d19e52a745bfaaa7ef9e5fe65d5d17df9bcd4a8f8b31e80501fe271a02ffad5148235f903506e70bb80920f8d25ac82a7c28f77a631d9fb6ac  kernel.release"
